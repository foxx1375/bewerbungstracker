{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Table,Button,Card,Form,Row,Col}from'react-bootstrap';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const ApplicationList=()=>{const[applications,setApplications]=useState([]);const[error,setError]=useState(null);const[selected,setSelected]=useState(new Set());useEffect(()=>{axios.get('http://localhost:3001/applications').then(response=>{setApplications(response.data.data);}).catch(err=>{setError(err.message);});},[]);if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Fehler: \",error]});}const handleDelete=id=>{if(window.confirm(\"Sind Sie sicher, dass Sie diese Bewerbung löschen möchten?\")){axios.delete(\"http://localhost:3001/applications/\".concat(id)).then(response=>{alert('Bewerbung erfolgreich gelöscht!');setApplications(applications.filter(app=>app.id!==id));}).catch(error=>{alert('Fehler beim Löschen: '+error.message);});}};const toggleSelection=id=>{const newSelected=new Set(selected);if(newSelected.has(id)){newSelected.delete(id);}else{newSelected.add(id);}setSelected(newSelected);};return/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Bewerbungsliste\"}),/*#__PURE__*/_jsx(Card,{className:\"shadow-lg\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",onChange:()=>{if(selected.size===applications.length){setSelected(new Set());}else{setSelected(new Set(applications.map(app=>app.id)));}},checked:selected.size===applications.length})}),/*#__PURE__*/_jsx(\"th\",{children:\"Firma\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Position\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Anschreiben\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Stellenausschreibung\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Aktionen\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:applications.map(app=>/*#__PURE__*/_jsxs(\"tr\",{className:selected.has(app.id)?'table-success':'',children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",checked:selected.has(app.id),onChange:()=>toggleSelection(app.id)})}),/*#__PURE__*/_jsx(\"td\",{children:app.company}),/*#__PURE__*/_jsx(\"td\",{children:app.position}),/*#__PURE__*/_jsx(\"td\",{children:app.status}),/*#__PURE__*/_jsx(\"td\",{children:app.cover_letter_path?/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:3001/uploads/\".concat(app.cover_letter_path.split('/').pop()),target:\"_blank\",rel:\"noopener noreferrer\",children:\"Anschreiben herunterladen\"}):'Kein Anschreiben'}),/*#__PURE__*/_jsx(\"td\",{children:app.job_posting_path?/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:3001/uploads/\".concat(app.job_posting_path.split('/').pop()),target:\"_blank\",rel:\"noopener noreferrer\",children:\"Stellenausschreibung herunterladen\"}):'Keine Stellenausschreibung'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>handleDelete(app.id),children:\"L\\xF6schen\"})})]},app.id))})]}),/*#__PURE__*/_jsx(Row,{className:\"mt-3\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",disabled:selected.size===0,onClick:()=>{if(window.confirm(\"Sind Sie sicher, dass Sie alle ausgewählten Bewerbungen löschen möchten?\")){selected.forEach(id=>handleDelete(id));}},children:\"Ausgew\\xE4hlte Bewerbungen l\\xF6schen\"})})})]})})]});};export default ApplicationList;","map":{"version":3,"names":["React","useEffect","useState","axios","Table","Button","Card","Form","Row","Col","jsxs","_jsxs","jsx","_jsx","ApplicationList","applications","setApplications","error","setError","selected","setSelected","Set","get","then","response","data","catch","err","message","children","handleDelete","id","window","confirm","delete","concat","alert","filter","app","toggleSelection","newSelected","has","add","className","Body","striped","bordered","hover","responsive","Check","type","onChange","size","length","map","checked","company","position","status","cover_letter_path","href","split","pop","target","rel","job_posting_path","variant","onClick","disabled","forEach"],"sources":["/Users/frankbutefur/Documents/030 - Development/bewerbungstracker/frontend/src/components/ApplicationList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Table, Button, Card, Form, Row, Col } from 'react-bootstrap';\n\nconst ApplicationList = () => {\n  const [applications, setApplications] = useState([]);\n  const [error, setError] = useState(null);\n  const [selected, setSelected] = useState(new Set());\n\n  useEffect(() => {\n    axios\n      .get('http://localhost:3001/applications')\n      .then((response) => {\n        setApplications(response.data.data);\n      })\n      .catch((err) => {\n        setError(err.message);\n      });\n  }, []);\n\n  if (error) {\n    return <div>Fehler: {error}</div>;\n  }\n\n  const handleDelete = (id) => {\n    if (window.confirm(\"Sind Sie sicher, dass Sie diese Bewerbung löschen möchten?\")) {\n      axios\n        .delete(`http://localhost:3001/applications/${id}`)\n        .then((response) => {\n          alert('Bewerbung erfolgreich gelöscht!');\n          setApplications(applications.filter((app) => app.id !== id));\n        })\n        .catch((error) => {\n          alert('Fehler beim Löschen: ' + error.message);\n        });\n    }\n  };\n\n  const toggleSelection = (id) => {\n    const newSelected = new Set(selected);\n    if (newSelected.has(id)) {\n      newSelected.delete(id);\n    } else {\n      newSelected.add(id);\n    }\n    setSelected(newSelected);\n  };\n\n  return (\n    <div className=\"my-4\">\n      <h2>Bewerbungsliste</h2>\n      <Card className=\"shadow-lg\">\n        <Card.Body>\n          <Table striped bordered hover responsive>\n            <thead>\n              <tr>\n                <th>\n                  <Form.Check\n                    type=\"checkbox\"\n                    onChange={() => {\n                      if (selected.size === applications.length) {\n                        setSelected(new Set());\n                      } else {\n                        setSelected(new Set(applications.map(app => app.id)));\n                      }\n                    }}\n                    checked={selected.size === applications.length}\n                  />\n                </th>\n                <th>Firma</th>\n                <th>Position</th>\n                <th>Status</th>\n                <th>Anschreiben</th>\n                <th>Stellenausschreibung</th>\n                <th>Aktionen</th>\n              </tr>\n            </thead>\n            <tbody>\n              {applications.map((app) => (\n                <tr key={app.id} className={selected.has(app.id) ? 'table-success' : ''}>\n                  <td>\n                    <Form.Check\n                      type=\"checkbox\"\n                      checked={selected.has(app.id)}\n                      onChange={() => toggleSelection(app.id)}\n                    />\n                  </td>\n                  <td>{app.company}</td>\n                  <td>{app.position}</td>\n                  <td>{app.status}</td>\n                  <td>\n                    {app.cover_letter_path ? (\n                      <a\n                        href={`http://localhost:3001/uploads/${app.cover_letter_path.split('/').pop()}`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        Anschreiben herunterladen\n                      </a>\n                    ) : (\n                      'Kein Anschreiben'\n                    )}\n                  </td>\n                  <td>\n                    {app.job_posting_path ? (\n                      <a\n                        href={`http://localhost:3001/uploads/${app.job_posting_path.split('/').pop()}`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        Stellenausschreibung herunterladen\n                      </a>\n                    ) : (\n                      'Keine Stellenausschreibung'\n                    )}\n                  </td>\n                  <td>\n                    <Button variant=\"danger\" onClick={() => handleDelete(app.id)}>Löschen</Button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n          <Row className=\"mt-3\">\n            <Col>\n              <Button\n                variant=\"danger\"\n                disabled={selected.size === 0}\n                onClick={() => {\n                  if (window.confirm(\"Sind Sie sicher, dass Sie alle ausgewählten Bewerbungen löschen möchten?\")) {\n                    selected.forEach((id) => handleDelete(id));\n                  }\n                }}\n              >\n                Ausgewählte Bewerbungen löschen\n              </Button>\n            </Col>\n          </Row>\n        </Card.Body>\n      </Card>\n    </div>\n  );\n};\n\nexport default ApplicationList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}